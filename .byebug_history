c
@company.CompanyCode
n
params[:type]
params[:file]
n
c
@month
n
 @month.aasm_state
n
Month.find(params[:format])
c
n
sqlStatment
c
n
@month
n
c
cc
sqlStatment
c
sqlStatment
c
n
sqlStatment
c
rulesii.rule
rulesii
rulesii.to_s
rulseii
sqlStatment
c
n
sqlStatment
n
c
n
rulesii
sqlStatment = "update \"acontracts\" set AIISelected =1  where " + rulesii.to_s + " and \"company_id\"=" + company_id.to_s + " and \"month_id=\"" + month_id.to_s
n
c
n
@rulesii=Rulesii.where(" company_id = ?",company_id)
n
month.id
month.company_id
month
c
n
c
n
Month.find(session["month_id"]).id
Month.find(session["month_id"])
session["month_id"]
params
c
session["month_id"]
params
c
n
Rulesii.where(" company_id = ?",company_id)
n
month.id
month.company_id
month
c
month
n
@month
n
c
params
session[:company_id]
n
@month.aasm_state
n
c
params[:format]
params
params[:id]
n
@month.aasm_state
c
n
params[:id]
c
aasm_state
self
self.aasm_state
c
session[:company_id]
c
n
@month.aasm_state
@company
n
@month
n
c
n
c
self
@month
month
n
c
n
c
nc
n
c
n
c
n
c
n
c
n
c
n
c
@month.aasm_state
n
c
n
c
company_id=session[:company_id]
c
Acontract.methods
Acontract
c
n
c
n
c
n
c
n
c
months1
n
c
rake db:seed
n
company
n
c
v 
c
 @month.import_parties_status=:imported_parties
 @month.import_parties_status?
 @month.import_parties_status ? :imported_parties
 @month.import_parties_status =? :imported_parties
 @month.import_parties_status 
 @month.import_parties_status
 @month.import_parties_status = :imported_parties
:imported_parties
@month
n
@month
n
c
n
@month
n
c
@month.month
@fich.BalanceSheetDate
@fich.HoldingPartyReference
@company.CompanyCode
n
@fich
n
c
@fich
n
c
params[:file]
@fich
n
c
params[:file]
valida_company_month("parties")
@fich
n
c
@fich
n
ficheiro
c
valida_company_month("parties")
n
c
@fich.HoldingPartyReference
@month
@company
n
c
ficheiro
c
ficheiro
c
ficheiro
c
n
ficheiro
c
@fich.HoldingPartyReference
n
c
n
c
n
ficheiro
n
c
n
c
n
c
@month.month
@party.BalanceSheetDate
@company.CompanyCode
@party.HoldingPartyReference
(@party.HoldingPartyReference!=@company.CompanyCode)
(@party.BalanceSheetDate!=@month.month)
n
c
@month.month
@month=Month.find(session["month_id"])
@month=Month.find(session["month_id"))
@party.BalanceSheetDate
n
c
n
@company
@party
n
c
@company
@party
n
c
@company
n
@party.HoldingPartyReference
@party
n
c
valida_company_month
n
c
Company.find(session[:company_id])
Company.find(id: session[:company_id])
